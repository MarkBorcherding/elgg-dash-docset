<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Elgg: Elgg/engine/lib/upgrades/create_upgrade.php File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="elgg_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elgg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e256eaafeeae80b9b34a28b1ef87f183.html">Elgg</a></li><li class="navelem"><a class="el" href="dir_ac9b7bd8ad09c3c5fda80b3cc2a21709.html">engine</a></li><li class="navelem"><a class="el" href="dir_8046085063ca2435fde818b58ec8052b.html">lib</a></li><li class="navelem"><a class="el" href="dir_619346a6ef1873c983f8851fd4a6f549.html">upgrades</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">create_upgrade.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abc87ee25b9f454a9f801cfd62033dcdb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(php_sapi_name()!= 'cli') <a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(count($argv)&lt; 2)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#abc87ee25b9f454a9f801cfd62033dcdb">$name</a> = $argv[1]</td></tr>
<tr class="separator:abc87ee25b9f454a9f801cfd62033dcdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a48edf58c8f4b2bc0e004b5f7853442"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a4a48edf58c8f4b2bc0e004b5f7853442">if</a> (strlen($<a class="el" href="actions_2twitter__api_2interstitial__settings_8php.html#a15907ec3dd0d6369a0a804dec31747cb">name</a>) &gt; 24)</td></tr>
<tr class="separator:a4a48edf58c8f4b2bc0e004b5f7853442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afed2989c1dde19ccb2671340d45cae2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#afed2989c1dde19ccb2671340d45cae2a">$upgrade_path</a> = dirname(__FILE__)</td></tr>
<tr class="separator:afed2989c1dde19ccb2671340d45cae2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac101c415b027b654f266d7f2e39717c0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#ac101c415b027b654f266d7f2e39717c0">$upgrade_name</a> = strtolower($<a class="el" href="actions_2twitter__api_2interstitial__settings_8php.html#a15907ec3dd0d6369a0a804dec31747cb">name</a>)</td></tr>
<tr class="separator:ac101c415b027b654f266d7f2e39717c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6846fe74f0344b4926b7f197ec3af13a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a6846fe74f0344b4926b7f197ec3af13a">$upgrade_release</a> = str_replace(array(' ', '-'), '_', $release)</td></tr>
<tr class="separator:a6846fe74f0344b4926b7f197ec3af13a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78db1a0602e3b6ac1d9a1b5ec103c160"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a78db1a0602e3b6ac1d9a1b5ec103c160">$time</a> = time()</td></tr>
<tr class="separator:a78db1a0602e3b6ac1d9a1b5ec103c160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d65e1e03726f45379462b32c9f179a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a95d65e1e03726f45379462b32c9f179a">$upgrade_rnd</a> = substr(md5($time), 0, 16)</td></tr>
<tr class="separator:a95d65e1e03726f45379462b32c9f179a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c265a471c194ec9ee27af7d1b615bbb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a3c265a471c194ec9ee27af7d1b615bbb">$upgrade_date</a> = date('Ymd', $time)</td></tr>
<tr class="separator:a3c265a471c194ec9ee27af7d1b615bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6763749243bbdcf49b1a4b6de8294135"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a6763749243bbdcf49b1a4b6de8294135">$upgrade_inc</a> = 0</td></tr>
<tr class="separator:a6763749243bbdcf49b1a4b6de8294135"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9590b15215a21e9b42eb546aeef79704"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a9590b15215a21e9b42eb546aeef79704">$files</a> = <a class="el" href="elgglib_8php.html#ab95447c3f446bec6aa32ed3236c3f209">elgg_get_file_list</a>($upgrade_path)</td></tr>
<tr class="separator:a9590b15215a21e9b42eb546aeef79704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42e9c235e33e42c954614500bb3ed2f5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="php_2export_2relationship_8php.html#a886d1a8ce2a57cc78946a7e0026b82f1">foreach</a>($files as $filename) <br class="typebreak"/>
<a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>($upgrade_inc&lt; 10)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a42e9c235e33e42c954614500bb3ed2f5">$upgrade_version</a> = $upgrade_date . $upgrade_inc</td></tr>
<tr class="separator:a42e9c235e33e42c954614500bb3ed2f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cc4d2e44e4fb9287229d288feb8e1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(substr($release, 0, 3)== '1.7')&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a63cc4d2e44e4fb9287229d288feb8e1b">else</a></td></tr>
<tr class="separator:a63cc4d2e44e4fb9287229d288feb8e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ed4c9554cb0413aa5a8e3b857a81f9c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a2ed4c9554cb0413aa5a8e3b857a81f9c">$upgrade_file</a> = $upgrade_path . '/' . $upgrade_name</td></tr>
<tr class="separator:a2ed4c9554cb0413aa5a8e3b857a81f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3d439a990840005a11b12e1d20c557"><td class="memItemLeft" align="right" valign="top"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(is_file($upgrade_file))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#a1f3d439a990840005a11b12e1d20c557">$upgrade_code</a></td></tr>
<tr class="separator:a1f3d439a990840005a11b12e1d20c557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00da9d5d8bd5b6b944793e093860aff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create__upgrade_8php.html#ab00da9d5d8bd5b6b944793e093860aff">$h</a> = fopen($upgrade_file, 'wb')</td></tr>
<tr class="separator:ab00da9d5d8bd5b6b944793e093860aff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a9590b15215a21e9b42eb546aeef79704"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$files = <a class="el" href="elgglib_8php.html#ab95447c3f446bec6aa32ed3236c3f209">elgg_get_file_list</a>($upgrade_path)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab00da9d5d8bd5b6b944793e093860aff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$h = fopen($upgrade_file, 'wb')</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abc87ee25b9f454a9f801cfd62033dcdb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (php_sapi_name()!= 'cli') <a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (count($argv)&lt; 2) $<a class="el" href="actions_2twitter__api_2interstitial__settings_8php.html#a15907ec3dd0d6369a0a804dec31747cb">name</a> = $argv[1]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a78db1a0602e3b6ac1d9a1b5ec103c160"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$time = time()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1f3d439a990840005a11b12e1d20c557"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (is_file($upgrade_file)) $<a class="el" href="engine_2lib_2upgrade_8php.html#a72b3295bb543994c62e2f7471d7fb969">upgrade_code</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= &lt;&lt;&lt;___UPGRADE</div>
<div class="line">&lt;?php</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">___UPGRADE</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c265a471c194ec9ee27af7d1b615bbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$upgrade_date = date('Ymd', $time)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ed4c9554cb0413aa5a8e3b857a81f9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$upgrade_file = $upgrade_path . '/' . $upgrade_name</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6763749243bbdcf49b1a4b6de8294135"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$upgrade_inc = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac101c415b027b654f266d7f2e39717c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$upgrade_name = strtolower($<a class="el" href="actions_2twitter__api_2interstitial__settings_8php.html#a15907ec3dd0d6369a0a804dec31747cb">name</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afed2989c1dde19ccb2671340d45cae2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$upgrade_path = dirname(__FILE__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6846fe74f0344b4926b7f197ec3af13a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$upgrade_release = str_replace(array(' ', '-'), '_', $release)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a95d65e1e03726f45379462b32c9f179a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$upgrade_rnd = substr(md5($time), 0, 16)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a42e9c235e33e42c954614500bb3ed2f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="php_2export_2relationship_8php.html#a886d1a8ce2a57cc78946a7e0026b82f1">foreach</a> ($files as $filename) <a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> ($upgrade_inc&lt; 10) $upgrade_version = $upgrade_date . $upgrade_inc</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a63cc4d2e44e4fb9287229d288feb8e1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (!$h) <a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (!fputs($h, $<a class="el" href="engine_2lib_2upgrade_8php.html#a72b3295bb543994c62e2f7471d7fb969">upgrade_code</a>)) else</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="create__upgrade_8php.html#ac101c415b027b654f266d7f2e39717c0">$upgrade_name</a> = <a class="code" href="create__upgrade_8php.html#a42e9c235e33e42c954614500bb3ed2f5">$upgrade_version</a> . <span class="stringliteral">&quot;-$upgrade_release-$name-$upgrade_rnd.php&quot;</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4a48edf58c8f4b2bc0e004b5f7853442"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if(strlen($<a class="el" href="actions_2twitter__api_2interstitial__settings_8php.html#a15907ec3dd0d6369a0a804dec31747cb">name</a>) &gt; 24)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 19 2012 12:53:45 for Elgg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
