<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Elgg: Elgg/engine/lib/relationships.php File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="elgg_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elgg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e256eaafeeae80b9b34a28b1ef87f183.html">Elgg</a></li><li class="navelem"><a class="el" href="dir_ac9b7bd8ad09c3c5fda80b3cc2a21709.html">engine</a></li><li class="navelem"><a class="el" href="dir_8046085063ca2435fde818b58ec8052b.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">relationships.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespace_elgg_1_1_core"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_elgg_1_1_core.html">Elgg\Core</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aecb45dd554768fde7e0634c01f52244f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#aecb45dd554768fde7e0634c01f52244f">row_to_elggrelationship</a> ($row)</td></tr>
<tr class="separator:aecb45dd554768fde7e0634c01f52244f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b803a2f92e8828039b209562125aa56"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a6b803a2f92e8828039b209562125aa56">get_relationship</a> ($id)</td></tr>
<tr class="separator:a6b803a2f92e8828039b209562125aa56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96aca09e56e634a7405f59cb6579d16e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a96aca09e56e634a7405f59cb6579d16e">delete_relationship</a> ($id)</td></tr>
<tr class="separator:a96aca09e56e634a7405f59cb6579d16e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77974c941aa2a96778170afd0fae4acf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a77974c941aa2a96778170afd0fae4acf">add_entity_relationship</a> ($guid_one, $relationship, $guid_two)</td></tr>
<tr class="separator:a77974c941aa2a96778170afd0fae4acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7bd1e4b8ef3566416e1b6fb7b82c3e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#ae7bd1e4b8ef3566416e1b6fb7b82c3e1">check_entity_relationship</a> ($guid_one, $relationship, $guid_two)</td></tr>
<tr class="separator:ae7bd1e4b8ef3566416e1b6fb7b82c3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0b6f5e895e63f4776266aeb589d49e1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#ad0b6f5e895e63f4776266aeb589d49e1">remove_entity_relationship</a> ($guid_one, $relationship, $guid_two)</td></tr>
<tr class="separator:ad0b6f5e895e63f4776266aeb589d49e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5619fa4f52394cd20de6de8d0c00d81a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a5619fa4f52394cd20de6de8d0c00d81a">remove_entity_relationships</a> ($guid_one, $relationship=&quot;&quot;, $inverse=false, $<a class="el" href="views_2default_2css_2admin_8php.html#a6e4f3473ef5a1db445d7f82bab04e366">type</a>= '')</td></tr>
<tr class="separator:a5619fa4f52394cd20de6de8d0c00d81a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c6d5ccb003d95ee78769f719e7b32cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a4c6d5ccb003d95ee78769f719e7b32cc">get_entity_relationships</a> ($guid, $inverse_relationship=FALSE)</td></tr>
<tr class="separator:a4c6d5ccb003d95ee78769f719e7b32cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743921595516dbca8116ab6875d5fc6c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a743921595516dbca8116ab6875d5fc6c">elgg_get_entities_from_relationship</a> ($options)</td></tr>
<tr class="separator:a743921595516dbca8116ab6875d5fc6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69e1c403f9f87dc0af960d1b3789a266"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a69e1c403f9f87dc0af960d1b3789a266">elgg_get_entity_relationship_where_sql</a> ($column, $relationship=NULL, $relationship_guid=NULL, $inverse_relationship=FALSE)</td></tr>
<tr class="separator:a69e1c403f9f87dc0af960d1b3789a266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a056a8b9b86ca8dfceca2f88537b0e116"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a056a8b9b86ca8dfceca2f88537b0e116">elgg_list_entities_from_relationship</a> (array $options=array())</td></tr>
<tr class="separator:a056a8b9b86ca8dfceca2f88537b0e116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63766d108700cff38c96e7af8ba23976"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a63766d108700cff38c96e7af8ba23976">elgg_get_entities_from_relationship_count</a> (array $options=array())</td></tr>
<tr class="separator:a63766d108700cff38c96e7af8ba23976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a3a2fa013f11834905c38b05032b4d1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a0a3a2fa013f11834905c38b05032b4d1">elgg_list_entities_from_relationship_count</a> ($options)</td></tr>
<tr class="separator:a0a3a2fa013f11834905c38b05032b4d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12900068c3cee3292a7611812b08241"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#aa12900068c3cee3292a7611812b08241">elgg_register_relationship_url_handler</a> ($relationship_type, $function_name)</td></tr>
<tr class="separator:aa12900068c3cee3292a7611812b08241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f163e8a32a036d2494062c56019983"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#af7f163e8a32a036d2494062c56019983">get_relationship_url</a> ($id)</td></tr>
<tr class="separator:af7f163e8a32a036d2494062c56019983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97f67b80a55197b9f76c0f85d906655c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a97f67b80a55197b9f76c0f85d906655c">already_attached</a> ($guid_one, $guid_two)</td></tr>
<tr class="separator:a97f67b80a55197b9f76c0f85d906655c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e3d3d0149a2475fba601915ad58a11a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a9e3d3d0149a2475fba601915ad58a11a">get_attachments</a> ($guid, $<a class="el" href="views_2default_2css_2admin_8php.html#a6e4f3473ef5a1db445d7f82bab04e366">type</a>=&quot;&quot;)</td></tr>
<tr class="separator:a9e3d3d0149a2475fba601915ad58a11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07ba7a1afc70123c5b8dc923d2ea74ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a07ba7a1afc70123c5b8dc923d2ea74ec">remove_attachment</a> ($guid_one, $guid_two)</td></tr>
<tr class="separator:a07ba7a1afc70123c5b8dc923d2ea74ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ffa985b527f5c5a2842a4a8f57d1f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a32ffa985b527f5c5a2842a4a8f57d1f8">make_attachment</a> ($guid_one, $guid_two)</td></tr>
<tr class="separator:a32ffa985b527f5c5a2842a4a8f57d1f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5cd4734140b4ea672922cb0767a82f7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#ac5cd4734140b4ea672922cb0767a82f7">import_relationship_plugin_hook</a> ($hook, $entity_type, $returnvalue, $params)</td></tr>
<tr class="separator:ac5cd4734140b4ea672922cb0767a82f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3caa073c3d24cf0f2786dc9220d07138"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a3caa073c3d24cf0f2786dc9220d07138">export_relationship_plugin_hook</a> ($hook, $entity_type, $returnvalue, $params)</td></tr>
<tr class="separator:a3caa073c3d24cf0f2786dc9220d07138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c48dc8dd5c186e91cd9ca4f419be15b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="relationships_8php.html#a6c48dc8dd5c186e91cd9ca4f419be15b">relationship_notification_hook</a> ($event, $<a class="el" href="views_2default_2css_2admin_8php.html#a6e4f3473ef5a1db445d7f82bab04e366">type</a>, $object)</td></tr>
<tr class="separator:a6c48dc8dd5c186e91cd9ca4f419be15b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a77974c941aa2a96778170afd0fae4acf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">add_entity_relationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Define an arbitrary relationship between two entities. This relationship could be a friendship, a group membership or a site membership.</p>
<p>This function lets you make the statement "$guid_one is a $relationship of $guid_two".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid_one</td><td>First GUID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$relationship</td><td>Relationship name </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$guid_two</td><td>Second GUID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

</div>
</div>
<a class="anchor" id="a97f67b80a55197b9f76c0f85d906655c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">already_attached </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to determine if the object trying to attach to other, has already done so</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid_one</td><td>This is the target object </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$guid_two</td><td>This is the object trying to attach to $guid_one</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool  private </dd></dl>

</div>
</div>
<a class="anchor" id="ae7bd1e4b8ef3566416e1b6fb7b82c3e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">check_entity_relationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determine if a relationship between two entities exists and returns the relationship object if it does</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid_one</td><td>The GUID of the entity "owning" the relationship </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$relationship</td><td>The type of relationship </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$guid_two</td><td>The GUID of the entity the relationship is with</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>object|false Depending on success </dd></dl>

</div>
</div>
<a class="anchor" id="a96aca09e56e634a7405f59cb6579d16e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">delete_relationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete a specific relationship.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>The relationship ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

</div>
</div>
<a class="anchor" id="a743921595516dbca8116ab6875d5fc6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elgg_get_entities_from_relationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return entities matching a given query joining against a relationship. Also accepts all options available to <a class="el" href="lib_2entities_8php.html#af085c8362e49c4f52d4f1fcf58ca6fb8">elgg_get_entities()</a> and <a class="el" href="engine_2lib_2metadata_8php.html#aec4b6f0b9565e3554acb9b39ef34a2ac">elgg_get_entities_from_metadata()</a>.</p>
<p>To ask for entities that do not have a particulat relationship to an entity, use a custom where clause like the following: </p>
<pre class="fragment">$options['wheres'][] = "NOT EXISTS (
    SELECT 1 FROM {$db_prefix}entity_relationships
        WHERE guid_one = e.guid
        AND relationship = '$relationship'
)";
</pre><dl class="section see"><dt>See Also</dt><dd><a class="el" href="lib_2entities_8php.html#af085c8362e49c4f52d4f1fcf58ca6fb8">elgg_get_entities</a> </dd>
<dd>
<a class="el" href="engine_2lib_2metadata_8php.html#aec4b6f0b9565e3554acb9b39ef34a2ac">elgg_get_entities_from_metadata</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Array in format: <pre class="fragment">relationship =&gt; NULL|STR relationship

relationship_guid =&gt; NULL|INT Guid of relationship to test

inverse_relationship =&gt; BOOL Inverse the relationship
</pre></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed If count, int. If not count, array. false on errors. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.7.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a63766d108700cff38c96e7af8ba23976"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elgg_get_entities_from_relationship_count </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the number of entities by a the number of entities related to them in a particular way. This is a good way to get out the users with the most friends, or the groups with the most members.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>An options array compatible with <a class="el" href="relationships_8php.html#a743921595516dbca8116ab6875d5fc6c">elgg_get_entities_from_relationship()</a> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed int If count, int. If not count, array. false on errors. </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a69e1c403f9f87dc0af960d1b3789a266"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elgg_get_entity_relationship_where_sql </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship_guid</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$inverse_relationship</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns sql appropriate for relationship joins and wheres</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000064">Todo:</a></b></dt><dd>add support for multiple relationships and guids.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$column</td><td>Column name the guid should be checked against. Provide in table.column format. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$relationship</td><td>Relationship string </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$relationship_guid</td><td>Entity guid to check </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$inverse_relationship</td><td>Inverse relationship check?</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.7.0  private </dd></dl>

</div>
</div>
<a class="anchor" id="a056a8b9b86ca8dfceca2f88537b0e116"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elgg_list_entities_from_relationship </td>
          <td>(</td>
          <td class="paramtype">array&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a viewable list of entities by relationship</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="lib_2entities_8php.html#a3a100de94a0d137ff3320335aca19152">elgg_list_entities()</a> </dd>
<dd>
<a class="el" href="relationships_8php.html#a743921595516dbca8116ab6875d5fc6c">elgg_get_entities_from_relationship()</a></dd></dl>
<dl class="section return"><dt>Returns</dt><dd>string The viewable list of entities </dd></dl>

</div>
</div>
<a class="anchor" id="a0a3a2fa013f11834905c38b05032b4d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elgg_list_entities_from_relationship_count </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a list of entities by relationship count</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="relationships_8php.html#a63766d108700cff38c96e7af8ba23976">elgg_get_entities_from_relationship_count()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>Options array</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.8.0 </dd></dl>

</div>
</div>
<a class="anchor" id="aa12900068c3cee3292a7611812b08241"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elgg_register_relationship_url_handler </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$function_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the URL handler for a particular relationship type</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$relationship_type</td><td>The relationship type. </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$function_name</td><td>The function to register</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool Depending on success </dd></dl>

</div>
</div>
<a class="anchor" id="a3caa073c3d24cf0f2786dc9220d07138"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">export_relationship_plugin_hook </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entity_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$returnvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handler called by trigger_plugin_hook on the "export" event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hook</td><td>export </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$entity_type</td><td>all </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$returnvalue</td><td>Previous hook return value </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$params</td><td>Parameters</td></tr>
  </table>
  </dd>
</dl>
<p>export all </p>
<dl class="section return"><dt>Returns</dt><dd>mixed  private </dd></dl>

</div>
</div>
<a class="anchor" id="a9e3d3d0149a2475fba601915ad58a11a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_attachments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to get all objects attached to a particular object</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid</td><td>Entity GUID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>The type of object to return e.g. 'file', 'friend_of' etc</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an array of objects  private </dd></dl>

</div>
</div>
<a class="anchor" id="a4c6d5ccb003d95ee78769f719e7b32cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_entity_relationships </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$inverse_relationship</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get all the relationships for a given guid.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid</td><td>The GUID of the relationship owner </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$inverse_relationship</td><td>Inverse relationship owners?</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed </dd></dl>

</div>
</div>
<a class="anchor" id="a6b803a2f92e8828039b209562125aa56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_relationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a relationship.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>The ID of a relationship</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed </dd></dl>

</div>
</div>
<a class="anchor" id="af7f163e8a32a036d2494062c56019983"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_relationship_url </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the url for a given relationship.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$id</td><td>Relationship ID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string </dd></dl>

</div>
</div>
<a class="anchor" id="ac5cd4734140b4ea672922cb0767a82f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">import_relationship_plugin_hook </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$hook</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$entity_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$returnvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Handler called by trigger_plugin_hook on the "import" event.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$hook</td><td>import </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$entity_type</td><td>all </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$returnvalue</td><td>Value from previous hook </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$params</td><td>Array of params</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>mixed  private </dd></dl>

</div>
</div>
<a class="anchor" id="a32ffa985b527f5c5a2842a4a8f57d1f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">make_attachment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to start the process of attaching one object to another</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid_one</td><td>This is the target object </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$guid_two</td><td>This is the object trying to attach to $guid_one</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true|void  private </dd></dl>

</div>
</div>
<a class="anchor" id="a6c48dc8dd5c186e91cd9ca4f419be15b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">relationship_notification_hook </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notify user that someone has friended them</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$event</td><td>Event name </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>Object type </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$object</td><td>Object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool  private </dd></dl>

</div>
</div>
<a class="anchor" id="a07ba7a1afc70123c5b8dc923d2ea74ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_attachment </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Function to remove a particular attachment between two objects</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid_one</td><td>This is the target object </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$guid_two</td><td>This is the object to remove from $guid_one</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void  private </dd></dl>

</div>
</div>
<a class="anchor" id="ad0b6f5e895e63f4776266aeb589d49e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_entity_relationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_two</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove an arbitrary relationship between two entities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid_one</td><td>First GUID </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$relationship</td><td>Relationship name </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$guid_two</td><td>Second GUID</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

</div>
</div>
<a class="anchor" id="a5619fa4f52394cd20de6de8d0c00d81a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">remove_entity_relationships </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$guid_one</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$relationship</em> = <code>&quot;&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$inverse</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$type</em> = <code>''</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes all arbitrary relationships originating from a particular entity</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$guid_one</td><td>The GUID of the entity </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$relationship</td><td>The name of the relationship (optional) </td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$inverse</td><td>Whether we're deleting inverse relationships (default false) </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$type</td><td>The type of entity to the delete to (defaults to all)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool Depending on success </dd></dl>

</div>
</div>
<a class="anchor" id="aecb45dd554768fde7e0634c01f52244f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">row_to_elggrelationship </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$row</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a database row to a new <a class="el" href="class_elgg_relationship.html">ElggRelationship</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">stdClass</td><td class="paramname">$row</td><td>Database row from the relationship table</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>stdClass or <a class="el" href="class_elgg_metadata.html">ElggMetadata</a>  private </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 19 2012 12:53:44 for Elgg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
