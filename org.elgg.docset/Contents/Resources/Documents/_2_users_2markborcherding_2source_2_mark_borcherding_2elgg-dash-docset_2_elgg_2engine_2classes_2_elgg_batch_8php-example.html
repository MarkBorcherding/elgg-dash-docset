<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Elgg: /Users/markborcherding/source/MarkBorcherding/elgg-dash-docset/Elgg/engine/classes/ElggBatch.php</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="elgg_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elgg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">/Users/markborcherding/source/MarkBorcherding/elgg-dash-docset/Elgg/engine/classes/ElggBatch.php</div>  </div>
</div><!--header-->
<div class="contents">
<p>Efficiently run operations on batches of results for any function that supports an options array.</p>
<p>This is usually used with <a class="el" href="lib_2entities_8php.html#af085c8362e49c4f52d4f1fcf58ca6fb8">elgg_get_entities()</a> and friends, <a class="el" href="lib_2annotations_8php.html#ae6685c23c9906b8c00469e1f6a1ca717">elgg_get_annotations()</a>, and <a class="el" href="engine_2lib_2metadata_8php.html#a1614d620ec0b0d0b9531c68070ffb33c">elgg_get_metadata()</a>.</p>
<p>If you pass a valid PHP callback, all results will be run through that callback. You can still <a class="el" href="tree_8php.html#a0a583a69bf94918bb14022f1c43db484">foreach()</a> through the result set after. Valid PHP callbacks can be a string, an array, or a closure. <a class="el" href="">http://php.net/manual/en/language.pseudo-types.php</a></p>
<p>The callback function must accept 3 arguments: an entity, the getter used, and the options used.</p>
<p>Results from the callback are stored in callbackResult. If the callback returns only booleans, callbackResults will be the combined result of all calls. If no entities are processed, callbackResults will be null.</p>
<p>If the callback returns anything else, callbackresult will be an indexed array of whatever the callback returns. If returning error handling information, you should include enough information to determine which result you're referring to.</p>
<p>Don't combine returning bools and returning something else.</p>
<p>Note that returning false will not stop the foreach.</p>
<dl class="section warning"><dt>Warning</dt><dd>If your callback or foreach loop deletes or disable entities you MUST call setIncrementOffset(false) or set that when instantiating. This forces the offset to stay what it was in the $options array.</dd></dl>
<p><code> // using foreach $batch = new <a class="el" href="class_elgg_batch.html">ElggBatch</a>('elgg_get_entities', array()); $batch-&gt;setIncrementOffset(false);</code></p>
<p><code>foreach ($batch as $entity) { $entity-&gt;disable(); }</code></p>
<p><code>// using both a callback $callback = function($result, $getter, $options) { var_dump("Looking at annotation id: $result-&gt;id"); return true; }</code></p>
<p><code>$batch = new <a class="el" href="class_elgg_batch.html">ElggBatch</a>('elgg_get_annotations', array('guid' =&gt; 2), $callback); </code></p>
<div class="fragment"></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 19 2012 12:53:43 for Elgg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
