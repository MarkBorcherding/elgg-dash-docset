<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Elgg: Elgg/engine/handlers/cache_handler.php File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="elgg_logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elgg
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e256eaafeeae80b9b34a28b1ef87f183.html">Elgg</a></li><li class="navelem"><a class="el" href="dir_ac9b7bd8ad09c3c5fda80b3cc2a21709.html">engine</a></li><li class="navelem"><a class="el" href="dir_f12cbba1c84353d565a44511ec8a948f.html">handlers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">cache_handler.php File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespace_elgg_1_1_core"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_elgg_1_1_core.html">Elgg\Core</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aafebb8f7534fad795cccf13b9b849e3b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#aafebb8f7534fad795cccf13b9b849e3b">$mysql_dblink</a> = mysql_connect($CONFIG-&gt;<a class="el" href="settings_8example_8php.html#a58c4bffefd4b61a202ffa42c7cffb0ae">dbhost</a>, $CONFIG-&gt;<a class="el" href="settings_8example_8php.html#accceab10b3f0d042dba1a29ccbeffa7a">dbuser</a>, $CONFIG-&gt;<a class="el" href="settings_8example_8php.html#a14721ae6d7d541d0aaf62f17b4424541">dbpass</a>, true)</td></tr>
<tr class="separator:aafebb8f7534fad795cccf13b9b849e3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13fe72c4c3c4ecec75696d2516360a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(!$mysql_dblink) <a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(!mysql_select_db($CONFIG-&gt;<br class="typebreak"/>
<a class="el" href="settings_8example_8php.html#ac3742435c9f995a493b6e6da3cb86c0f">dbname</a>, $mysql_dblink))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#af13fe72c4c3c4ecec75696d2516360a4">$query</a></td></tr>
<tr class="separator:af13fe72c4c3c4ecec75696d2516360a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112ef069ddc0454086e3d1e6d8d55d07"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a112ef069ddc0454086e3d1e6d8d55d07">$result</a> = mysql_query($query, $mysql_dblink)</td></tr>
<tr class="separator:a112ef069ddc0454086e3d1e6d8d55d07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59741b9f2dbcfc339816ea04f9c8c47e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a59741b9f2dbcfc339816ea04f9c8c47e">$dirty_request</a> = $_GET['request']</td></tr>
<tr class="separator:a59741b9f2dbcfc339816ea04f9c8c47e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac53bdb48bdd96ff9c20e2a86f48ce5f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#aac53bdb48bdd96ff9c20e2a86f48ce5f">$filter</a> = array(&quot;options&quot; =&gt; array(&quot;regexp&quot; =&gt; &quot;/^(\.?[_a-zA-Z0-9\/]+)+$/&quot;))</td></tr>
<tr class="separator:aac53bdb48bdd96ff9c20e2a86f48ce5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb35c8495a232b510389fa6d7b15d38a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#abb35c8495a232b510389fa6d7b15d38a">$request</a> = filter_var($dirty_request, FILTER_VALIDATE_REGEXP, $filter)</td></tr>
<tr class="separator:abb35c8495a232b510389fa6d7b15d38a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b063836cc21220ddc1758e5dc48e62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(!$request||!$<a class="el" href="config_8php.html#aa5ef0cb168ca2ac68e4db3ebbeb2f2c0">simplecache_enabled</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a06b063836cc21220ddc1758e5dc48e62">$regex</a> = '|([^/]+)/([^/]+)/(.+)\.([^\.]+)\.([^.]+)$|'</td></tr>
<tr class="separator:a06b063836cc21220ddc1758e5dc48e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a4a6fba2208984cabb3afacadf33919"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a9a4a6fba2208984cabb3afacadf33919">$type</a> = $matches[1]</td></tr>
<tr class="separator:a9a4a6fba2208984cabb3afacadf33919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe8570152a600a6fd786b754c1e48bea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#afe8570152a600a6fd786b754c1e48bea">$viewtype</a> = $matches[2]</td></tr>
<tr class="separator:afe8570152a600a6fd786b754c1e48bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acccf2eac8663e0cebe8101e90fbab089"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#acccf2eac8663e0cebe8101e90fbab089">$view</a> = $matches[3]</td></tr>
<tr class="separator:acccf2eac8663e0cebe8101e90fbab089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3984cdc176ac1917376aaa9e16827e5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a3984cdc176ac1917376aaa9e16827e5c">$ts</a> = $matches[4]</td></tr>
<tr class="separator:a3984cdc176ac1917376aaa9e16827e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a00a46f10aa5a5ef0755d447dba00f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a25a00a46f10aa5a5ef0755d447dba00f">$etag</a> = $ts</td></tr>
<tr class="separator:a25a00a46f10aa5a5ef0755d447dba00f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0722441477f957078ee2437054556cbc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a0722441477f957078ee2437054556cbc">$filename</a> = $<a class="el" href="config_8php.html#abbf11aefba4c1b19a109e47086d353fe">dataroot</a> . 'views_simplecache/' . md5($viewtype . $<a class="el" href="config_8php.html#ade96fdca15c3a32501586a8c19fc6960">view</a>)</td></tr>
<tr class="separator:a0722441477f957078ee2437054556cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad35e45e1939d39571fd46c2ee2251133"><td class="memItemLeft" align="right" valign="top"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a>(file_exists($filename))&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#ad35e45e1939d39571fd46c2ee2251133">else</a></td></tr>
<tr class="separator:ad35e45e1939d39571fd46c2ee2251133"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e6516f43ab874500590fe9ec8315fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cache__handler_8php.html#a87e6516f43ab874500590fe9ec8315fb">$contents</a> = <a class="el" href="views_8php.html#ad9cfe0db8ec2500444773023700c9f33">elgg_view</a>($<a class="el" href="config_8php.html#ade96fdca15c3a32501586a8c19fc6960">view</a>)</td></tr>
<tr class="separator:a87e6516f43ab874500590fe9ec8315fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a87e6516f43ab874500590fe9ec8315fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$contents = <a class="el" href="views_8php.html#ad9cfe0db8ec2500444773023700c9f33">elgg_view</a>($<a class="el" href="config_8php.html#ade96fdca15c3a32501586a8c19fc6960">view</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a59741b9f2dbcfc339816ea04f9c8c47e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$dirty_request = $_GET['request']</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a25a00a46f10aa5a5ef0755d447dba00f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$etag = $ts</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0722441477f957078ee2437054556cbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$filename = $<a class="el" href="config_8php.html#abbf11aefba4c1b19a109e47086d353fe">dataroot</a> . 'views_simplecache/' . md5($viewtype . $<a class="el" href="config_8php.html#ade96fdca15c3a32501586a8c19fc6960">view</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aac53bdb48bdd96ff9c20e2a86f48ce5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$filter = array(&quot;options&quot; =&gt; array(&quot;regexp&quot; =&gt; &quot;/^(\.?[_a-zA-Z0-9\/]+)+$/&quot;))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aafebb8f7534fad795cccf13b9b849e3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$mysql_dblink = mysql_connect($CONFIG-&gt;<a class="el" href="settings_8example_8php.html#a58c4bffefd4b61a202ffa42c7cffb0ae">dbhost</a>, $CONFIG-&gt;<a class="el" href="settings_8example_8php.html#accceab10b3f0d042dba1a29ccbeffa7a">dbuser</a>, $CONFIG-&gt;<a class="el" href="settings_8example_8php.html#a14721ae6d7d541d0aaf62f17b4424541">dbpass</a>, true)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af13fe72c4c3c4ecec75696d2516360a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (!$mysql_dblink) <a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (!mysql_select_db($CONFIG-&gt;<a class="el" href="settings_8example_8php.html#ac3742435c9f995a493b6e6da3cb86c0f">dbname</a>, $mysql_dblink)) $query</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= <span class="stringliteral">&quot;select name, value from {$CONFIG-&gt;dbprefix}datalists</span></div>
<div class="line"><span class="stringliteral">        where name in (&#39;dataroot&#39;, &#39;simplecache_enabled&#39;)&quot;</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06b063836cc21220ddc1758e5dc48e62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (!$request||!$<a class="el" href="config_8php.html#aa5ef0cb168ca2ac68e4db3ebbeb2f2c0">simplecache_enabled</a>) $regex = '|([^/]+)/([^/]+)/(.+)\.([^\.]+)\.([^.]+)$|'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="abb35c8495a232b510389fa6d7b15d38a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$request = filter_var($dirty_request, FILTER_VALIDATE_REGEXP, $filter)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a112ef069ddc0454086e3d1e6d8d55d07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$result = mysql_query($query, $mysql_dblink)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3984cdc176ac1917376aaa9e16827e5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$ts = $matches[4]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9a4a6fba2208984cabb3afacadf33919"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$<a class="el" href="views_2default_2css_2admin_8php.html#a6e4f3473ef5a1db445d7f82bab04e366">type</a> = $matches[1]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acccf2eac8663e0cebe8101e90fbab089"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$<a class="el" href="config_8php.html#ade96fdca15c3a32501586a8c19fc6960">view</a> = $matches[3]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afe8570152a600a6fd786b754c1e48bea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$viewtype = $matches[2]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad35e45e1939d39571fd46c2ee2251133"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="requirements_8php.html#a20b77d8c49f925bab2b5674ffd1d4f95">if</a> (file_exists($filename)) else</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">{</div>
<div class="line">    </div>
<div class="line">    mysql_close(<a class="code" href="cache__handler_8php.html#aafebb8f7534fad795cccf13b9b849e3b">$mysql_dblink</a>)</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 19 2012 12:53:44 for Elgg by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
